!function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):e(t.Flickity,t.fizzyUIUtils)}(window,function t(e,i){"use strict";e.createMethods.push("_createBgLazyLoad");var o=e.prototype;function a(t,e,i){this.element=t,this.url=e,this.img=new Image,this.flickity=i,this.load()}return o._createBgLazyLoad=function(){this.on("select",this.bgLazyLoad)},o.bgLazyLoad=function(){var t=this.options.bgLazyLoad;if(t)for(var e=this.getAdjacentCellElements("number"==typeof t?t:0),i=0;i<e.length;i++){var o=e[i];this.bgLazyLoadElem(o);for(var a=o.querySelectorAll("[data-flickity-bg-lazyload]"),l=0;l<a.length;l++)this.bgLazyLoadElem(a[l])}},o.bgLazyLoadElem=function(t){var e=t.getAttribute("data-flickity-bg-lazyload");e&&new a(t,e,this)},a.prototype.handleEvent=i.handleEvent,a.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.element.removeAttribute("data-flickity-bg-lazyload")},a.prototype.onload=function(t){this.element.style.backgroundImage='url("'+this.url+'")',this.complete(t,"flickity-bg-lazyloaded")},a.prototype.onerror=function(t){this.complete(t,"flickity-bg-lazyerror")},a.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this),this.element.classList.add(e),this.flickity.dispatchEvent("bgLazyLoad",t,this.element)},e.BgLazyLoader=a,e});